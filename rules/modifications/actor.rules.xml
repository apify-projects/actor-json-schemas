<?xml version="1.0" encoding="UTF-8"?>
<Enchantments xmlns="https://apify.com/json/modifications"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="https://apify.com/json/modifications ../modification-rules-schema.xsd">
    <!-- REMOVE/REPLACE VALUES -->
    <RemoveValue json-path="**/$id"/>
    <!-- We need to use relative paths as later these will include json-schemas with descriptions -->
    <ReplaceValue json-path="**/$ref" type="js">
        value.replace(/^https:\/\/apify.com\/schemas\/v1\//, '')
    </ReplaceValue>
    <ReplaceValue json-path="/properties/inputSchema/oneOf" type="json">
        [{ "type": "string" }, { "$ref": "input.json" }]
    </ReplaceValue>
    <ReplaceValue json-path="/properties/input/oneOf" type="json">
        [{ "type": "string" }, { "$ref": "input.json" }]
    </ReplaceValue>
    <ReplaceValue json-path="**/$ref" type="js">
        value.replace(/^https:\/\/apify.com\/schemas\/v1\//, '')
    </ReplaceValue>
    <!-- In the original schema these attributes have additionalProperties true, which is not great for code auto-complete -->
    <ReplaceValue json-path="/" type="js">
        ({ ...value, additionalProperties: false })
    </ReplaceValue>
</Enchantments>
